{% extends "base.html" %}

{% block title %}Kategoriler | Admin{% endblock %}

{% block content %}
<!-- Header -->
<header class="bg-surface border-b border-outline-variant shadow-md3-1">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 rounded-md3-lg gradient-primary flex items-center justify-center">
                    <span class="text-on-primary font-bold text-xl">BW</span>
                </div>
                <div>
                    <div class="text-xs text-on-surface-variant">Admin Paneli</div>
                    <div class="font-bold text-on-surface">BestWork</div>
                </div>
            </div>
            <div class="flex items-center space-x-3">
                <a href="/admin/urunler" class="px-4 py-2 text-sm font-semibold text-on-surface-variant hover:bg-surface-container rounded-md3-full transition">Ürünler</a>
                <a href="/dashboard" class="px-4 py-2 text-sm font-semibold text-on-surface-variant hover:bg-surface-container rounded-md3-full transition">Dashboard</a>
                <a href="/" class="px-4 py-2 text-sm font-semibold text-on-primary gradient-primary rounded-md3-full shadow-md3-2 hover:shadow-md3-3 transition">Siteye Dön</a>
            </div>
        </div>
    </div>
</header>

<section class="py-12">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between mb-8">
            <div>
                <span class="inline-block px-4 py-1.5 bg-primary-container text-on-primary-container text-sm font-semibold rounded-md3-full mb-3">⚡ Admin Panel</span>
                <h1 class="text-4xl font-extrabold text-on-surface mb-2">Kategoriler</h1>
                <p class="text-lg text-on-surface-variant">Kategori listesini yönetin</p>
            </div>
        </div>

        <div class="bg-surface rounded-md3-2xl shadow-md3-3 overflow-hidden border border-outline-variant/20">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-outline-variant">
                    <thead class="bg-surface-container-low">
                        <tr>
                            <th class="px-6 py-4 text-left text-xs font-bold text-on-surface uppercase tracking-wider">ID</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-on-surface uppercase tracking-wider">Ad</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-on-surface uppercase tracking-wider">Açıklama</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-on-surface uppercase tracking-wider">Oluşturulma</th>
                            <th class="px-6 py-4 text-right text-xs font-bold text-on-surface uppercase tracking-wider">İşlemler</th>
                        </tr>
                    </thead>
                    <tbody class="bg-surface divide-y divide-outline-variant">
                        {% for kategori in kategoriler %}
                        <tr class="hover:bg-surface-container transition-colors">
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-on-surface">#{{ kategori.id }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-on-surface">{{ kategori.ad }}</td>
                            <td class="px-6 py-4 text-sm text-on-surface-variant">{{ kategori.aciklama or '-' }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-on-surface-variant">{{ kategori.olusturulma_tarihi.strftime('%d.%m.%Y') if kategori.olusturulma_tarihi else '-' }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <form action="/admin/kategori-sil" method="post" class="inline-block" onsubmit="return confirm('Bu kategoriyi silmek istediğinize emin misiniz?');">
                                    <input type="hidden" name="kategori_id" value="{{ kategori.id }}">
                                    <button type="submit" class="text-error hover:text-error-container transition-colors font-bold">Sil</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Yeni Kategori Ekleme Formu -->
        <div class="mt-8 bg-surface rounded-md3-2xl shadow-md3-3 p-8 border border-outline-variant/20">
            <h3 class="text-2xl font-bold text-on-surface mb-6">Yeni Kategori Ekle</h3>
            <form action="/admin/kategoriler" method="post">
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label for="ad" class="block text-sm font-bold text-on-surface mb-2">Kategori Adı *</label>
                        <input type="text" id="ad" name="ad" required class="w-full px-4 py-3 border-2 border-outline rounded-md3-lg focus:border-primary focus:outline-none transition bg-surface text-on-surface">
                    </div>
                    <div>
                        <label for="aciklama" class="block text-sm font-bold text-on-surface mb-2">Açıklama</label>
                        <input type="text" id="aciklama" name="aciklama" class="w-full px-4 py-3 border-2 border-outline rounded-md3-lg focus:border-primary focus:outline-none transition bg-surface text-on-surface">
                    </div>
                </div>
                <div class="mt-6 flex justify-end">
                    <button type="submit" class="px-8 py-3 bg-primary text-on-primary font-bold rounded-md3-full shadow-md3-2 hover:shadow-md3-3 hover:bg-primary/90 transition transform hover:-translate-y-0.5">
                        Kategori Oluştur
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}
